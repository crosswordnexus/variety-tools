<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patchwork Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Patchwork Converter</h1>
    
    <div class="note">
        This tool converts Ingrid-style <b>.ipuz</b> files into the "Patchwork" crossword format. 
        Upload your file, enter your clues for the rows and patches, and download the final puzzle. 
        Your progress is automatically saved to your browser's local storage as you type.
    </div>
    
    <div class="section">
        <h2>1. Upload Ingrid .ipuz</h2>
        <input type="file" id="file-input" accept=".ipuz">
    </div>

    <div id="editor" class="hidden">
        <div class="section">
            <h2>2. Enter Clues</h2>
            <div id="rows-container">
                <h3>Rows</h3>
                <!-- Row inputs will be generated here -->
            </div>
            <div id="patches-container">
                <h3>Patches</h3>
                <!-- Patch inputs will be generated here -->
            </div>
        </div>

        <div class="section" style="text-align: center;">
            <h2>3. Generate and Download</h2>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 1em;">
                <button id="download-easy-btn" class="download-btn">Download Easy Version</button>
                <button id="download-hard-btn" class="download-btn">Download Hard Version</button>
            </div>
            <div id="status-msg" style="margin-top: 1em; height: 1.2em; font-weight: bold;"></div>
        </div>

        <div id="manual-section" class="section hidden">
            <h3>Manual Export</h3>
            <p style="font-size: 0.9em; color: #aaa;">
                If your browser blocks the download, you can copy the raw data below and save it as a <b>.ipuz</b> file manually.
            </p>
            <textarea id="output-text" readonly style="width: 100%; height: 150px; background: #121212; color: #4dabff; border: 1px solid #333; font-family: monospace; padding: 10px; border-radius: 4px; box-sizing: border-box;"></textarea>
            <div style="margin-top: 10px; text-align: right;">
                <button id="copy-btn" class="download-btn" style="background-color: #28a745;">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <script src="patchwork.js"></script>
</body>
</html>
